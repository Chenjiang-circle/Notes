# 什么是宏？

简单来说：宏定义又称为宏代换、宏替换，简称为“宏”。是C提供的三种预处理功能的其中一种。

## 1.不带参数的宏定义

格式为：`#define <标识符> <常量>`

其中的标识符就是所谓的符号常量，也称为“宏名”。

预处理（预编译）工作也叫宏展开，即将宏名替换为字符串。预处理实在编译之前的处理，而编译工作的任务之一就是语法检查，预处理不做语法检查，只是将程序中出现的`标识符`全部替换成`常量`。

说明：

- 宏名一般应大写英文字母，并且宏名必须是合法的用户标识符；

+ 可以用`#undef`命令终止宏定义的作用域；

+ 宏定义可以嵌套；

+ 字符串`""`中永远不包含宏；

+ 宏定义不分配内存，变量定义分配内存。

  ## 2.带参数的宏定义

格式为：`#define 宏名(参数表) 表达式`

> eg: `#define S(a, b) a*b`
>
> `area = S(3, 2)；`
>
> 第一步：area = a*b；第二步area = 3 * 2。

说明：

- 宏替换只作替换，不做计算，不做表达式求解；
- 宏名和参数的括号间不能有空格；
- 宏展开不占运行时间，只占编译时间，函数调用占运行时间（分配内存、保留现场、值传递、返回值）

注意：

> ```c
> #define FUN(a) "a"
> ```
>
> 那么`FUN(345)`会被替换成什么？
>
> 答案是：`"a"`。`""`内的字符不会被当成形参，即使`"a"`中a和FUN(a)中的a长的一样。
>
> 如果想要使`FUN(345)`替换成`"345"`需要`#`的用法：
>
> ```C
> #define STR(str) #str
> ```
>
> `#`用于将宏定义中的参数两端加上`""`
>
> 例如：`STR(myname)`会被替换成`"myname"`

