# Linux后台运行进程

## 1. nohup

**hangup 名称的来由**
在 Unix 的早期版本中，每个终端都会通过 modem 和系统通讯。当用户 logout 时，modem 就会挂断（hang up）电话。同理，当 modem 断开连接时，就会给终端发送 hangup 信号来通知其关闭所有子进程。

我们知道，当用户注销（logout）或者网络断开时，终端会收到 HUP（hangup）信号从而关闭其所有子进程。因此，我们的解决办法就有两种途径：要么让进程忽略 HUP 信号，要么让进程运行在新的会话里从而成为不属于此终端的子进程。

顾名思义，nohup 的用途就是让提交的命令忽略 hangup 信号。只用nohup命令，关闭终端，进程还存在。若在终端中直接使用Ctrl+c,则会关闭进程。

## 2. setsid

nohup 无疑能通过忽略 HUP 信号来使我们的进程避免中途被中断，但如果我们换个角度思考，如果我们的进程不属于接受 HUP 信号的终端的子进程，那么自然也就不会受到 HUP 信号的影响了。setsid 就能帮助我们做到这一点。

![image-20201006101048189](D:\个人\Notes\Notes_pic\image-20201006101048189.png)

将这个终端关闭之后，执行`ps -ef | grep www.`，结果如下：

![image-20201006101154068](D:\个人\Notes\Notes_pic\image-20201006101154068.png)

## 3. &

`&`表示后台运行，但是使用&时，关闭终端，进程也会跟着停止。

![image-20201006101445706](D:\个人\Notes\Notes_pic\image-20201006101445706.png)

关闭终端，再次执行`ps -ef | grep www`之后的运行结果为：

![image-20201006101548461](D:\个人\Notes\Notes_pic\image-20201006101548461.png)